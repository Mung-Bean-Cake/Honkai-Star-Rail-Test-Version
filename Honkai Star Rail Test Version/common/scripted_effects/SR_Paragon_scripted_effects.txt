SR_leader_creator = { 
# 领袖生成脚本：本质上是创建一个新国家，物种，领袖，然后把这个领袖clone给玩家【原版】
	optimize_memory
	create_country = { # 创建一个新国家
		name = "NAME_leader_country"
		type = faction
		auto_delete = yes
		flag = {
			icon = {
				category = "special"
				file = "unknown.dds"
			}
			background = {
				category = "backgrounds"
				file = "00_solid.dds"
			}
			colors = {
				"red"
				"red"
				"null"
				"null"
			}
		}
		effect = {
			save_event_target_as = leader_country
		}
	}
	event_target:leader_country = { # 创建一个新物种
		create_species = {
			name = $SPECIES_NAME$ # 物种名称
			class = $SPECIES_CLASS$ # 物种类别
			portrait = $LEADER_PORTRAIT$ # 肖像
			traits = {
				trait = "trait_enduring" # 物种特质
			}
			immortal = yes
			allow_negative_traits = no
			effect = {
				save_event_target_as = leader_species
			}
		}
		create_leader = {
			class = $CLASS$ # 领袖类别：科学家，指挥官，行政官
			species = event_target:leader_species # 领袖物种
			name = $NAME$ # 领袖名字
			skill = $SKILL$ # 等级
			gender = $GENDER$ # 性别
			# event_leader = yes # 注意：若为是，领袖无法参与国家选举
			immortal = yes # 是否为不朽
			background_ethic = $ETHIC$ # 领袖思潮
			skip_background_generation = yes # 禁用背景随机生成
			custom_description = $DESC$ # 自定义文本
			custom_catch_phrase = $CATCH_PHRASE$ # 自定义文本
			hide_age = $HIDEAGE$ # 是否隐藏年龄
			randomize_traits = no # 是否使用随机特质
			effect = {
				# freeze_leader_age = yes  # 冻结领袖年龄
				set_leader_flag = legendary_leader  # 传奇领袖，不占容量
				# set_leader_flag = should_not_have_upkeep  # 无维护费
				set_leader_flag = is_in_recruit_window  
				# 位于招募事件窗口内，内阁特质不显示×
				save_event_target_as = $EVENT_TARGET$
				if = { 
				# 下面效果：不到游戏中期触发：等级+2，中期末期之间，等级+5，末期以后，等级+9
					limit = {
						mid_game_years_passed < 0
					}
					add_skill_without_trait_selection = 2
				}
				else_if = {
					limit = {
						mid_game_years_passed >= 0
						end_game_years_passed < 0
					}
					add_skill_without_trait_selection = 5
				}
				else_if = {
					limit = {
						end_game_years_passed >= 0
					}
					add_skill_without_trait_selection = 9
				}
			}
		}
	}
	event_target:$EVENT_TARGET$ = {
		set_owner = root # 将领袖从空国家转移到玩家帝国
		exile_leader_as = SR_leader_exiled  
		# 没有这项（作为什么放逐）就会导致事件一触发就加入玩家的帝国
	}
}
SR_hire_leader = { # 招募脚本
	optimize_memory
	event_target:$EVENT_TARGET$ = {
		set_owner = root
		remove_leader_flag = is_in_recruit_window
		set_leader_flag = leader_death_events_blocked  # 阻止原版葬礼事件
		set_leader_flag = immune_to_negative_traits  # 阻止自动获得负面特质
	}
	create_message = { # 发送信息
		type = MESSAGE_RECRUITED_LEADER
		localization =  MESSAGE_RECRUITED_LEADER_DESC
		days = @toast_message_days
		target = event_target:$EVENT_TARGET$
		variable = {
			type = name
			localization = LEADER
			scope = event_target:$EVENT_TARGET$
		}
		variable = {
			key = "border"
			value = "GFX_border_legendary"
		}
	}
}
ui_hire_leader = {
	optimize_memory
	hidden_effect = {
		change_variable = {
			which = yuzhousuipian
			value = -2000
		}
		country_event = { id = $EVENT_NAME$}
		if = {
			limit = { has_specimen = faith_bond }
			change_variable = {
				which = yuzhousuipian
				value = 600
			}
		}
	}
}
ui_leader_get_trait = {
	optimize_memory
	event_target:$LEADER_TARGET$ = {
		add_trait = {trait = $TRAIT$ show_message = no}
	}
	change_variable = {
		which = yuzhousuipian
		value = -1500
	}
	if = {
		limit = { has_specimen = faith_bond }
		change_variable = {
			which = yuzhousuipian
			value = 250
		}
	}
}
ui_leader_get_other_skill = {
	optimize_memory
	hidden_effect = {
		change_variable = {
			which = yuzhousuipian
			value = -500
		}
		change_variable = {
			which = $LEADER_SKILL$
			value = 1
		}
	}
}
ruanmei_capture_effect = {
	optimize_memory
	random_list = {
		400 = {
			from = {
				controller = {
					every_owned_leader = {
						limit = { leader_class = scientist }
						add_experience = 100 }
				}
			}
		}
		300 = {
			from.owner = {
				create_fleet = {
					name = "NAME_Space_Amoeba_plural"
					effect = {
						random_list = {
							1 = { create_ship = { name = "NAME_Space_Amoeba_plural" design = "NAME_Great_Space_Organism" } }
							1 = { create_ship = { name = "NAME_Space_Amoeba_plural" design = "NAME_Large_Space_Organism_Blue" } }
							1 = { create_ship = { name = "NAME_Space_Amoeba_plural" design = "NAME_Large_Space_Organism_Teal" } }
							1 = { create_ship = { name = "NAME_Space_Amoeba_plural" design = "NAME_Large_Space_Organism_Orange" } }
							1 = { create_ship = { name = "NAME_Space_Amoeba_plural" design = "NAME_Large_Space_Organism_Zebra" } }
						}
						set_owner = from.owner
						set_location = from.owner.capital_star
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 20

					}
				}
			}
		}
		20 = {
			from.owner = {
				create_fleet = {
					name = "NAME_CHARGER_1"
					effect = {
						random_list = {
							1 = { create_ship = { name = "NAME_HIVE_FE_Small_Weaver_War" design = "NAME_HIVE_FE_Small_Weaver_War" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Small_Weaver_Growth" design = "NAME_HIVE_FE_Small_Weaver_Growth" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Small_Weaver_Control" design = "NAME_HIVE_FE_Small_Weaver_Control" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Mauler_Swarm" design = "NAME_HIVE_FE_Large_Mauler_Swarm" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Mauler_Picket" design = "NAME_HIVE_FE_Large_Mauler_Picket" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Weaver_Control" design = "NAME_HIVE_FE_Large_Weaver_Control" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Stinger" design = "NAME_HIVE_FE_Large_Stinger" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Mauler_Picket" design = "NAME_HIVE_FE_Large_Mauler_Picket" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Mauler_Picket" design = "NAME_HIVE_FE_Large_Mauler_Picket" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Mauler_Picket" design = "NAME_HIVE_FE_Large_Mauler_Picket" } }
						}
						set_owner = from.owner
						set_location = from.owner.capital_star
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 20
					}
				}
			}
		}
		5 = {
			from.owner = {
				create_fleet = {
					name = "NAME_Grand_Dragon"
					effect = {
						random_list = {
							1 = { create_ship = { name = "NAME_Shard_Dragon" design = "NAME_Shard_Dragon" } }
							1 = { create_ship = { name = "NAME_Sky_Dragon" design = "NAME_Sky_Dragon" } }
							1 = { create_ship = { name = "NAME_Grand_Dragon" design = "NAME_Grand_Dragon" } }
						}
						set_owner = from.owner
						set_location = from.owner.capital_star
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 20
					}
				}
			}
		}
		100 = {
			from.owner = {
				create_fleet = {
					name = "NAME_Tiyanki_Ox_Clonable"
					effect = {
						create_ship = { name = "NAME_Tiyanki_Ox_Clonable" design = "NAME_Tiyanki_Ox_Clonable" }
						set_owner = from.owner
						set_location = from.owner.capital_star
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 20
					}
				}
			}
		}
		1 = {
			from.owner = {
				create_fleet = {
					name = "NAME_Behemoth_ship"
					effect = {
						create_ship = { name = "NAME_Behemoth_04_cloaking" design = "NAME_Behemoth_04_cloaking" }
						set_owner = from.owner
						set_location = from.owner.capital_star
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 20
					}
				}
			}
		}
	}
}
ruanmei_planet_effect = {
	optimize_memory
	random_list = {
		400 = {
			root.owner = {
				every_owned_leader = {
					remove_all_negative_traits = yes
					add_experience = 700
				}
			}
		}
		400 = {
			root = {
				add_modifier = {
					modifier = ruanmei_effect_t1
					days = -1
				}
			}
			root.owner = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
		400 = {
			root = {
				add_modifier = {
					modifier = ruanmei_effect_t2
					days = -1
				}
			}
			root.owner = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
		300 = {
			root.owner = {
				create_fleet = {
					name = "NAME_Space_Amoeba_plural"
					effect = {
						random_list = {
							1 = { create_ship = { name = "NAME_Space_Amoeba_plural" design = "NAME_Great_Space_Organism" } }
							1 = { create_ship = { name = "NAME_Space_Amoeba_plural" design = "NAME_Large_Space_Organism_Blue" } }
							1 = { create_ship = { name = "NAME_Space_Amoeba_plural" design = "NAME_Large_Space_Organism_Teal" } }
							1 = { create_ship = { name = "NAME_Space_Amoeba_plural" design = "NAME_Large_Space_Organism_Orange" } }
							1 = { create_ship = { name = "NAME_Space_Amoeba_plural" design = "NAME_Large_Space_Organism_Zebra" } }
						}
						set_owner = root.owner
						set_location = root
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 20

					}
				}
			}
		}
		20 = {
			root.owner = {
				create_fleet = {
					name = "NAME_CHARGER_1"
					effect = {
						random_list = {
							1 = { create_ship = { name = "NAME_HIVE_FE_Small_Weaver_War" design = "NAME_HIVE_FE_Small_Weaver_War" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Small_Weaver_Growth" design = "NAME_HIVE_FE_Small_Weaver_Growth" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Small_Weaver_Control" design = "NAME_HIVE_FE_Small_Weaver_Control" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Mauler_Swarm" design = "NAME_HIVE_FE_Large_Mauler_Swarm" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Mauler_Picket" design = "NAME_HIVE_FE_Large_Mauler_Picket" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Weaver_Control" design = "NAME_HIVE_FE_Large_Weaver_Control" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Stinger" design = "NAME_HIVE_FE_Large_Stinger" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Mauler_Picket" design = "NAME_HIVE_FE_Large_Mauler_Picket" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Mauler_Picket" design = "NAME_HIVE_FE_Large_Mauler_Picket" } }
							1 = { create_ship = { name = "NAME_HIVE_FE_Large_Mauler_Picket" design = "NAME_HIVE_FE_Large_Mauler_Picket" } }
						}
						set_owner = root.owner
						set_location = root
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 20
					}
				}
			}
		}
		5 = {
			root.owner = {
				create_fleet = {
					name = "NAME_Grand_Dragon"
					effect = {
						random_list = {
							1 = { create_ship = { name = "NAME_Shard_Dragon" design = "NAME_Shard_Dragon" } }
							1 = { create_ship = { name = "NAME_Sky_Dragon" design = "NAME_Sky_Dragon" } }
							1 = { create_ship = { name = "NAME_Grand_Dragon" design = "NAME_Grand_Dragon" } }
						}
						set_owner = root.owner
						set_location = root
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 20
					}
				}
			}
		}
		100 = {
			root.owner = {
				create_fleet = {
					name = "NAME_Tiyanki_Ox_Clonable"
					effect = {
						create_ship = { name = "NAME_Tiyanki_Ox_Clonable" design = "NAME_Tiyanki_Ox_Clonable" }
						set_owner = root.owner
						set_location = root
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 20
					}
				}
			}
		}
		1 = {
			root.owner = {
				create_fleet = {
					name = "NAME_Behemoth_ship"
					effect = {
						create_ship = { name = "NAME_Behemoth_04_cloaking" design = "NAME_Behemoth_04_cloaking" }
						set_owner = root.owner
						set_location = root
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = return_point
						set_aggro_range = 20
					}
				}
			}
		}
	}
}